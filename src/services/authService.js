const API_BASE_URL = import.meta.env.VITE_API_BASE_URL || 'http://localhost:8000/api/v1';

export const authService = {
  initialize: async () => {
    console.log('Auth service initialis√©');
  },

  authenticateWithGoogle: () => {
    const authUrl = `${API_BASE_URL}/auth/oauth/google`;
    console.log('üîÑ Redirection vers:', authUrl);
    window.location.href = authUrl;
  },

  // V√©rifie si un objet 'user' existe dans le localStorage
  isAuthenticated: () => {
    const user = localStorage.getItem('user');
    return !!user;
  },

  getCurrentUser: async () => {
    try {
      const localUser = localStorage.getItem('user');
      if (localUser) {
        return JSON.parse(localUser);
      }
      return null;
    } catch (error) {
      console.error('Erreur lors de la r√©cup√©ration de l\'utilisateur:', error);
      return null;
    }
  },

  // Supprime l'utilisateur du localStorage et redirige
  logout: () => {
    localStorage.removeItem('user');
    // Id√©alement, vous devriez aussi appeler un endpoint /logout sur le backend
    // pour invalider le cookie c√¥t√© serveur.
    window.location.href = '/';
  },
};